!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rmock=t():e.rmock=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Distribution=void 0;t.Distribution=class{constructor(){}static Random(...e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalysisFilter=t.AnalysisEffect=void 0,t.AnalysisEffect=function(e){const t=e.toString(),n=t.indexOf("("),r=t.indexOf(")"),o=t.substring(n+1,r).replace(/\s/g,"").split(",");return t=>{const n=o.map(e=>t[e]);return e(...n)}},t.AnalysisFilter=function(e){const t=e.toString(),n=t.indexOf("("),r=t.indexOf(")"),o=t.substring(n+1,r).replace(/\s/g,"").split(",");return(t,n,r)=>{const i=o.map(e=>t[e]);return e(...i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetRuleOrder=void 0,t.GetRuleOrder=function(e,t){let n=[],r=[],o=[];function i(){r=[];for(let e of t)r.includes(e.dependent)||r.push(e.dependent);for(let t of e)r.includes(t.name)||n.includes(t.name)||(o.push(t),n.push(t.name))}i();let s=0;for(;t.length>0;){let e=t[s],r=!0;e.arguments.forEach(e=>{n.includes(e)||(r=!1)}),r?(o.push(e),t.splice(s,1)):s++,s>=t.length&&(i(),s=0)}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mocker=t.Distribution=t.DataMode=t.AttributeType=void 0;const r=n(4);Object.defineProperty(t,"DataMode",{enumerable:!0,get:function(){return r.DataMode}});const o=n(5);Object.defineProperty(t,"Distribution",{enumerable:!0,get:function(){return o.Distribution}});const i=n(9);Object.defineProperty(t,"AttributeType",{enumerable:!0,get:function(){return i.AttributeType}});const s=r.Generator;t.Mocker=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=t.Table=t.DataMode=void 0;const r=n(1),o=n(2);var i,s;!function(e){e[e.Object=0]="Object",e[e.Table=1]="Table"}(i=t.DataMode||(t.DataMode={})),function(e){e[e.ArrangeByRow=0]="ArrangeByRow",e[e.ArrangeByCol=1]="ArrangeByCol"}(s=t.Table||(t.Table={}));t.Generator=class{constructor(e){this.config=e,this.attributes={};for(let t of e.attributes)this.attributes[t.name]={type:t.type,distribution:t.distribution}}create(e={count:100,mode:i.Object}){return e.mode===i.Object?this._createObjectList(e.count):e.mode===i.Table?this._createTable(e.count,e.settings):void 0}_createObjectList(e){let t=[];for(let n=0;n<e;n++)t.push({});let n=o.GetRuleOrder(this.config.attributes,this.config.rules);for(let e of n)e.name?t.forEach(t=>{t[e.name]||(t[e.name]=e.distribution.random())}):e.filter?t.filter(r.AnalysisFilter(e.filter)).forEach(t=>{!t[e.dependent]&&Math.random()<=e.confidence&&(t[e.dependent]=r.AnalysisEffect(e.effect)(t))}):t.forEach(t=>{!t[e.dependent]&&Math.random()<=e.confidence&&(t[e.dependent]=r.AnalysisEffect(e.effect)(t))});return t}_createTable(e,t={head:!0,mode:s.ArrangeByRow}){if(t.mode===s.ArrangeByRow){let n=this.config.attributes.map(e=>e.name),i=t.head?[n]:[];for(let t=0;t<e;t++)i.push(Array(this.config.attributes.length));let s=o.GetRuleOrder(this.config.attributes,this.config.rules);for(let e of s)if(e.type){const t=n.indexOf(e.name);i.forEach(n=>{n[t]||(n[t]=e.distribution.random())})}else{const t=n.indexOf(e.dependent);i.filter(r.AnalysisFilter(e.filter)).forEach(n=>{n[t]=Math.random()<=e.confidence?r.AnalysisEffect(e.effect):this.attributes[t].distribution.random()})}return i}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Distribution=void 0;const r=n(6),o=n(7),i=n(8);t.Distribution={Compound:i.Compound,Continuous:{Uniform:o.Uniform,Normal:o.Normal},Date:{Uniform:o.Uniform,Normal:o.Normal},Discrete:{Discrete:r.Discrete}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Discrete=void 0;const r=n(0);class o extends r.Distribution{constructor(e,t){if(super(),this.range=e,t){this.p=[0];let e=0;for(let n of t)e+=n,this.p.push(e);if(1!==e)throw Error("the total rate is not 1")}else{this.p=[];for(let t=0;t<e.length;t++)this.p.push(t/e.length);this.p.push(1)}}random(){let e=Math.random();for(let t=0;t<this.p.length-1;t++)if(e<=this.p[t+1]&&e>=this.p[t])return this.range[t];return this.range[0]}}t.Discrete=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Normal=t.Uniform=void 0;const r=n(0);class o extends r.Distribution{constructor(e){super(),this.begin=e[0],this.length=e[1]-e[0]}random(){return this.begin+Math.random()*this.length}static Random(e){let t=e[0],n=e[1]-e[0];return t+Math.random()*n}}t.Uniform=o;class i extends r.Distribution{constructor(e,t){super(),this.u=e,this.sigma=t}random(){return this.u+i._BoxMuller()*this.sigma}static Random(e,t){return e+i._BoxMuller()*t}static _BoxMuller(){var e=0,t=0,n=0;do{n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t}while(0==n||n>=1);return e*Math.sqrt(-2*Math.log(n)/n)}}t.Normal=i,t.default={Uniform:o,Normal:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compound=void 0;const r=n(0),o=n(2),i=n(1);class s extends r.Distribution{constructor(e){super(),this.orders=o.GetRuleOrder(e.attributes,e.rules)}random(){let e={};for(let t of this.orders)t.name?e[t.name]||(e[t.name]=t.distribution.random()):t.filter?i.AnalysisFilter(t.filter)(e)&&!e[t.dependent]&&Math.random()<=t.confidence&&(e[t.dependent]=i.AnalysisEffect(t.effect)(e)):!e[t.dependent]&&Math.random()<=t.confidence&&(e[t.dependent]=i.AnalysisEffect(t.effect)(e));return e}}t.Compound=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeType=void 0,function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous",e[e.Date=2]="Date",e[e.Compound=3]="Compound"}(t.AttributeType||(t.AttributeType={}))}])}));