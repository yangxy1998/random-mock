<!DOCTYPE html>
<html>
    <body>
        <div id="menu"></div>
        <canvas id="chart"></canvas>
    </body>
    <script src="./dist/main.js"></script>
    <script src="../build/random-mock.js"></script>
    <script>
        const attributes = [
            {
                name: 'id',
                type: RandMock.AttributeType.Primary,
                distribution: new RandMock.Distribution.Disposable([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]),
                count: 10
            },
            {
                name: 'idf',
                type: RandMock.AttributeType.Primary,
                distribution: new RandMock.Distribution.Uniform([0, 10]),
                count: 100
            },
            {
                name: 'x',
                type: RandMock.AttributeType.Continuous,
                distribution: new RandMock.Distribution.Uniform([0, 10])
            },
            {
                name: 'y',
                type: RandMock.AttributeType.Continuous,
                distribution: new RandMock.Distribution.Uniform([0, 10])
            },
            {
                name: 'z',
                type: RandMock.AttributeType.Continuous,
                distribution: new RandMock.Distribution.Exponential(5, 5)
            },
            {
                name: 'region',
                type: RandMock.AttributeType.Category,
                distribution: new RandMock.Distribution.Standard(['USA', 'UK', 'CHN', 'RUS', 'FRA'])
            },
            {
                name: 'date',
                type: RandMock.AttributeType.Date,
                distribution: new RandMock.Distribution.Uniform([
                    '2021/01/01 00:00',
                    '2021/12/01 00:00'
                ]),
                format: 'YYYY/MM/DD HH:mm'
            }
        ]
        const rules = [
            {
                target: 'region',
                regulation: new RandMock.Regulation.MappingTable(
                    ['x', 'y'],
                    [
                        { and: (item) => item.x + item.y >= 10, value: 'CHN' },
                        { and: (item) => item.x - item.y <= 0, value: 'USA' }
                    ]
                ),
                confidence: 0.99
            },
            {
                target: 'z',
                regulation: new RandMock.Regulation.Expression(['x'], (item) => 10 - item.x),
                confidence: 0.98
            }
        ]
        const config = {
            attributes,
            rules
        }
        let mocker = new RandMock.Mocker(config)
        let data = mocker.create({
            mode: RandMock.DataMode.Object
        })
        console.log(data)
        const chart = new ExampleChart()
        chart.data(mocker.attributes, data)
    </script>
</html>
