<!DOCTYPE html>
<html>
    <body>
        <div id="menu"></div>
        <canvas id="chart"></canvas>
    </body>
    <script src="./dist/main.js"></script>
    <script src="../build/random-mock.js"></script>
    <script>
        const attributes = [
            {
                name: 'x',
                type: RandMock.Attribute.Primary(),
                distribution: RandMock.Distribution.Normal(0, 5)
            },
            {
                name: 'id',
                type: RandMock.Attribute.Primary(10),
                distribution: RandMock.Distribution.Disposable([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
            },
            {
                name: 'y',
                type: RandMock.Attribute.Continuous(),
                distribution: RandMock.Distribution.Uniform([0, 10])
            },
            {
                name: 'z',
                type: RandMock.Attribute.Continuous(),
                distribution: RandMock.Distribution.Exponential(5, 5)
            },
            {
                name: 'region',
                type: RandMock.Attribute.Category(),
                distribution: RandMock.Distribution.Standard(['CN', 'US'], [0.8, 0.2])
            },
            {
                name: 'date',
                type: RandMock.Attribute.Date('YYYY/MM/DD HH:mm'),
                distribution: RandMock.Distribution.Uniform([
                    '2021/01/01 00:00',
                    '2021/12/01 00:00'
                ])
            }
        ]
        const rules = [
            {
                dependent: 'y',
                arguments: ['region', 'x'],
                filter: (region) => region === 'US',
                effect: (x) => RandMock.Distribution.Normal(-1 * x, 0.5)().random(),
                confidence: 0.98
            },
            {
                dependent: 'y',
                arguments: ['x'],
                filter: (x) => x >= 3,
                effect: (x) => RandMock.Distribution.Normal(3 * x + 1, 0.5)().random(),
                confidence: 0.95
            },
            {
                dependent: 'z',
                arguments: ['x', 'y'],
                effect: (x, y) => x * 2 + y * y,
                confidence: 0.99
            }
        ]
        const config = {
            attributes,
            rules
        }
        let mocker = new RandMock.Mocker(config)
        let data = mocker.create({
            count: 1000,
            mode: RandMock.DataMode.Object
        })
        console.log(data)
        const chart = new ExampleChart()
        chart.data(mocker.attributes, data)
    </script>
</html>
